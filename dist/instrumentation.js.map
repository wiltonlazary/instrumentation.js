{"version":3,"sources":["../src/instrumentation.ts"],"names":[],"mappings":"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","file":"instrumentation.js","sourcesContent":["import { Binder, BinderDispatchDetail, DispatchOperation, BinderConsumerType, BinderDispatchCarrier } from './binder'\nimport { ObjectProxyHandler } from './proxy_handler'\n\nexport const ABORT_ACTION = { toString: () => 'ABORT_ACTION' }\nexport type PropertyCallType = 'none' | 'function' | 'setter' | 'writable'\nexport type PropertyCallTypeDetail = [PropertyCallType, any]\n\nconst prototypeInstrumented = new Map<any, Map<any, PropertyCallTypeDetail>>()\nconst propertyCallTypeFromPrototypeCache = new Map<any, Map<any, PropertyCallTypeDetail>>()\nconst binderInstrumented = new Map<any, Map<any, PropertyCallTypeDetail>>()\n\nexport type BindOutParamsType =\n    Array<\n    [string, (value: any, detail: BinderDispatchDetail) => any] |\n    [string, (value: any, detail: BinderDispatchDetail) => any, boolean] |\n    [string, any, any] |\n    [string, any, any, boolean]\n    > |\n    [string, (value: any, detail: BinderDispatchDetail) => any] |\n    [string, (value: any, detail: BinderDispatchDetail) => any, boolean] |\n    [string, any, any] |\n    [string, any, any, boolean]\n\nexport type BindInParamsType =\n    Array<\n    [any, string, (value: any, detail: BinderDispatchDetail) => any] |\n    [any, string, (value: any, detail: BinderDispatchDetail) => any, boolean] |\n    [any, string, any] |\n    [any, string, any, boolean]\n    > |\n    [any, string, (value: any, detail: BinderDispatchDetail) => any] |\n    [any, string, (value: any, detail: BinderDispatchDetail) => any, boolean] |\n    [any, string, any] |\n    [any, string, any, boolean]\n\nexport interface PropertyDescriptorPrototype {\n    isPropertyDescriptorPrototype: boolean\n    propertyKey: PropertyKey\n    descriptor: PropertyDescriptor\n    prototype: any\n}\n\nexport function pathContains(path: Array<any>, contained: Array<any>): boolean {\n    if (contained.length > path.length) {\n        return false\n    } else {\n        for (let i = 0; i < contained.length; i++) {\n            const pv = path[i]\n            const ov = contained[i]\n\n            if (pv !== '*' && ov !== '*' && pv != ov) {\n                return false\n            }\n        }\n\n        return true\n    }\n}\n\nexport function getHeadPrototype(prototype: any): any {\n    let nextPrototype = prototype\n\n    do {\n        prototype = nextPrototype\n        nextPrototype = Object.getPrototypeOf(prototype)\n    } while (!!nextPrototype)\n\n    return prototype\n}\n\nexport function getHeadPrototypeFromInstance(instance: any): any {\n    return getHeadPrototype(instance.constructor.prototype)\n}\n\nexport function getPropertyDescriptorPrototype(prototype: any, propertyKey: PropertyKey): PropertyDescriptorPrototype {\n    let nextPrototype = prototype\n    let descriptor: any = null\n\n    do {\n        prototype = nextPrototype\n        descriptor = Object.getOwnPropertyDescriptor(prototype, propertyKey)\n        nextPrototype = Object.getPrototypeOf(prototype)\n    } while (descriptor === undefined && !!nextPrototype)\n\n    return descriptor === undefined ? undefined : {\n        isPropertyDescriptorPrototype: true,\n        propertyKey: propertyKey,\n        descriptor: descriptor,\n        prototype: prototype\n    }\n}\n\nexport function getPropertyDescriptorPrototypeFromInstance(instance: any, propertyKey: PropertyKey): PropertyDescriptorPrototype {\n    return getPropertyDescriptorPrototype(instance.constructor.prototype, propertyKey)\n}\n\nexport function getPropertyCallTypeFromPrototype(prototype, propertyKey: PropertyKey): PropertyCallTypeDetail {\n    let result: PropertyCallTypeDetail = ['none', null]\n\n    if (!propertyCallTypeFromPrototypeCache.has(prototype) || !propertyCallTypeFromPrototypeCache.get(prototype).has(propertyKey)) {\n        let registeredMap: Map<any, PropertyCallTypeDetail> = propertyCallTypeFromPrototypeCache.get(prototype)\n\n        if (!registeredMap) {\n            registeredMap = new Map()\n            propertyCallTypeFromPrototypeCache.set(prototype, registeredMap)\n        }\n\n        const propertyDescriptorPrototype = getPropertyDescriptorPrototype(prototype, propertyKey)\n\n        if (propertyDescriptorPrototype !== undefined) {\n            result = propertyDescriptorPrototype.descriptor.set !== undefined ?\n                ['setter', propertyDescriptorPrototype.descriptor] : ['function', propertyDescriptorPrototype.descriptor]\n        }\n\n        registeredMap.set(propertyKey, result)\n    } else {\n        result = propertyCallTypeFromPrototypeCache.get(prototype).get(propertyKey) as any\n    }\n\n    return result\n}\n\nexport function getPropertyCallTypeFromPrototypeFromInstance(instance, propertyKey: PropertyKey): PropertyCallTypeDetail {\n    return getPropertyCallTypeFromPrototype(instance.constructor.prototype, propertyKey)\n}\n\nexport function valueFromPath(object, templatePlate: Array<any>, path: Array<any>): any {\n    if (object instanceof Object) {\n        let current = object\n\n        for (let i = 0; i < templatePlate.length; i++) {\n            let key = templatePlate[i]\n\n            if (key === '*') {\n                key = path[i]\n            }\n\n            current = current[key]\n\n            if (!(current instanceof Object)) {\n                if (i < path.length - 1) {\n                    current = undefined\n                }\n\n                break\n            }\n        }\n\n        return current\n    } else {\n        return undefined\n    }\n}\n\nexport class Instrumentation extends Object {\n    deepBy: Map<any, Set<Binder>> = null\n    ownInstrumented: Map<any, PropertyCallTypeDetail> = null\n    outBinders: Map<any, Set<Binder>> = null\n    inBinders: Map<any, Set<Binder>> = null\n    observedProxyHandlers: Map<ObjectProxyHandler<any>, any> = null\n\n    constructor(public readonly owner: any) {\n        super()\n    }\n\n    clear() {\n        if (this.observedProxyHandlers !== null) {\n            for (const proxyHandler of this.observedProxyHandlers.keys()) {\n                proxyHandler.removeObserver(this)\n            }\n        }\n\n        if (this.outBinders !== null) {\n            for (const element of this.outBinders.values()) {\n                for (const binder of element) {\n                    binder.dispose()\n                }\n\n                element.clear()\n            }\n        }\n\n        if (this.inBinders !== null) {\n            for (const element of this.inBinders.values()) {\n                for (const binder of element) {\n                    binder.dispose()\n                }\n\n                element.clear()\n            }\n        }\n    }\n\n    dispose() {\n        this.clear()\n        super['dispose']()\n    }\n\n    registerObserved(proxyHandler: ObjectProxyHandler<any>, propertyKey: any) {\n        if (this.observedProxyHandlers === null) {\n            this.observedProxyHandlers = new Map()\n        }\n\n        this.observedProxyHandlers.set(proxyHandler, propertyKey)\n    }\n\n    unregisterObserved(proxyHandler: ObjectProxyHandler<any>, propertyKey: any) {\n        this.observedProxyHandlers.delete(proxyHandler)\n\n        if (this.observedProxyHandlers.size === 0) {\n            this.observedProxyHandlers = null\n        }\n    }\n\n    addDeepBy(binder: Binder) {\n        if (!this.deepBy) {\n            this.deepBy = new Map()\n        }\n\n        let binderSet = this.deepBy.get(binder.producerPropertyKey)\n\n        if (!binderSet) {\n            binderSet = new Set()\n            this.deepBy.set(binder.producerPropertyKey, binderSet)\n        }\n\n        binderSet.add(binder)\n    }\n\n    removeDeepBy(binder: Binder) {\n        let binderSet = this.deepBy.get(binder.producerPropertyKey)\n\n        if (binderSet) {\n            binderSet.delete(binder)\n\n            if (binderSet.size === 0) {\n                this.deepBy.delete(binder.producerPropertyKey)\n\n                if (this.deepBy.size === 0) {\n                    this.deepBy = null\n                }\n            }\n        }\n    }\n\n    ensureIntrumentation(propertyKey: PropertyKey, instrumentPrototype: boolean = false): PropertyCallTypeDetail {\n        const ownerPrototype = this.owner.constructor.prototype\n        let result: PropertyCallTypeDetail = ['none', null]\n\n        if (this.ownInstrumented !== null && this.ownInstrumented.has(propertyKey)) {\n            result = this.ownInstrumented.get(propertyKey)\n        } else if (!binderInstrumented.has(ownerPrototype) || !binderInstrumented.get(ownerPrototype).has(propertyKey)) {\n            const ownPropertyDescriptor = Object.getOwnPropertyDescriptor(this.owner, propertyKey)\n\n            if (ownPropertyDescriptor !== undefined) {\n                result = this.instrumentOwn(propertyKey, ownPropertyDescriptor)\n            } else if (instrumentPrototype) {\n                let binderRegisteredMap: Map<any, PropertyCallTypeDetail> = binderInstrumented.get(ownerPrototype)\n\n                if (!binderRegisteredMap) {\n                    binderRegisteredMap = new Map()\n                    binderInstrumented.set(ownerPrototype, binderRegisteredMap)\n                }\n\n                const propertyDescriptorPrototype = getPropertyDescriptorPrototype(ownerPrototype, propertyKey)\n\n                if (!propertyDescriptorPrototype) {\n                    throw new Error(`Property key not found on owner prototype: ${propertyKey}`)\n                } else if (\n                    !prototypeInstrumented.has(propertyDescriptorPrototype.prototype) ||\n                    !prototypeInstrumented.get(propertyDescriptorPrototype.prototype).has(propertyKey)\n                ) {\n                    let prototypeRegisteredMap: Map<any, PropertyCallTypeDetail> = prototypeInstrumented.get(propertyDescriptorPrototype.prototype)\n\n                    if (!prototypeRegisteredMap) {\n                        prototypeRegisteredMap = new Map()\n                        prototypeInstrumented.set(propertyDescriptorPrototype.prototype, prototypeRegisteredMap)\n                    }\n\n                    result = this.instrument(\n                        propertyDescriptorPrototype.prototype,\n                        propertyDescriptorPrototype.propertyKey,\n                        propertyDescriptorPrototype.descriptor\n                    )\n\n                    prototypeRegisteredMap.set(propertyKey, result)\n                } else {\n                    result = prototypeInstrumented.get(propertyDescriptorPrototype.prototype).get(propertyKey) as any\n                }\n\n                binderRegisteredMap.set(propertyKey, result)\n            } else {\n                const propertyDescriptorPrototype = getPropertyDescriptorPrototype(ownerPrototype, propertyKey)\n\n                if (!propertyDescriptorPrototype) {\n                    throw new Error(`Property key not found on owner prototype: ${propertyKey}`)\n                } else {\n                    result = this.instrumentOwn(propertyKey, propertyDescriptorPrototype.descriptor)\n                }\n            }\n        } else {\n            result = binderInstrumented.get(ownerPrototype).get(propertyKey) as any\n        }\n\n        return result\n    }\n\n    instrument(target: any, propertyKey: PropertyKey, descriptor: PropertyDescriptor): PropertyCallTypeDetail {\n        if (typeof descriptor.value === 'function') {\n            const originalMethod = descriptor.value\n            delete target[propertyKey]\n\n            target[propertyKey] = function () {\n                const value = arguments\n\n                this.instrumentation.notify(\n                    value, undefined, 'call', [propertyKey],\n                    [(value) => { return originalMethod.apply(this, value) }, this]\n                )\n            }\n\n            return ['function', originalMethod]\n        } else if (descriptor.writable) {\n            const originalDescriptor = descriptor\n\n            Object.defineProperty(target, propertyKey, {\n                get: function () { return originalDescriptor.value },\n                set: function (value) {\n                    const instrumentation = this.instrumentation\n                    let oldValue = originalDescriptor.value\n                    let newValue = value\n\n                    if (value instanceof Object && instrumentation.deepBy && instrumentation.deepBy.has(propertyKey)) {\n                        if (value.isProxy) {\n                            const proxyHandler = value.proxyHandler\n\n                            if (proxyHandler.observer !== instrumentation) {\n                                proxyHandler.addObserver(instrumentation, propertyKey)\n                            }\n                        } else {\n                            newValue = ObjectProxyHandler.create(value, instrumentation, propertyKey)\n                        }\n                    }\n\n                    this.instrumentation.notify(\n                        newValue, oldValue, 'set', [propertyKey],\n                        [(value) => {\n                            if (oldValue && oldValue.isProxy) {\n                                oldValue.proxyHandler.removeObserver(instrumentation)\n                            }\n\n                            originalDescriptor.value = value\n                        }, this]\n                    )\n                },\n                enumerable: originalDescriptor.enumerable,\n                configurable: originalDescriptor.configurable\n            })\n\n            return ['writable', originalDescriptor]\n        } else if (descriptor.set !== undefined) {\n            const originalDescriptor = descriptor\n\n            Object.defineProperty(target, propertyKey, {\n                get: originalDescriptor.get,\n                set: function (value) {\n                    const instrumentation = this.instrumentation\n                    let oldValue = originalDescriptor.get.call(this)\n                    let newValue = value\n\n                    if (value instanceof Object && instrumentation.deepBy && instrumentation.deepBy.has(propertyKey)) {\n                        if (value.isProxy) {\n                            const ObjectProxyHandler = value.proxyHandler\n\n                            if (ObjectProxyHandler.observer !== instrumentation) {\n                                ObjectProxyHandler.addObserver(instrumentation, propertyKey)\n                            }\n                        } else {\n                            newValue = ObjectProxyHandler.create(value, instrumentation, propertyKey)\n                        }\n                    }\n\n                    this.instrumentation.notify(\n                        newValue, oldValue, 'set', [propertyKey],\n                        [(value) => {\n                            if (oldValue && oldValue.isProxy) {\n                                oldValue.proxyHandler.removeObserver(instrumentation)\n                            }\n\n                            originalDescriptor.set.call(this, value)\n                        }, this]\n                    )\n                },\n                enumerable: originalDescriptor.enumerable,\n                configurable: originalDescriptor.configurable\n            })\n\n            return ['setter', originalDescriptor]\n        } else {\n            return ['none', null]\n        }\n    }\n\n    instrumentOwn(\n        propertyKey: PropertyKey,\n        descriptor: PropertyDescriptor\n    ): PropertyCallTypeDetail {\n        if (this.ownInstrumented === null) {\n            this.ownInstrumented = new Map()\n        }\n\n        const result = this.instrument(this.owner, propertyKey, descriptor)\n        this.ownInstrumented.set(propertyKey, result)\n        return result\n    }\n\n    bindOut(expression: string, consumer: any | ((any, Binder) => any), consumerPropertyKey?: any, active?: boolean): Binder {\n        if (this.outBinders === null) {\n            this.outBinders = new Map()\n        }\n\n        let init = false\n        let expr = expression\n\n        if (expr.startsWith('+')) {\n            init = true\n            expr = expr.substr(1)\n        }\n\n        let producerPropertyKey = expr\n        let producerPropertyKeyPath = expr\n        let producerPropertyKeyPathRegExp = null\n        let deep = false\n\n        if (expr.indexOf('/') >= 0) {\n            deep = true\n            const indexOfSep = expr.indexOf('/')\n            producerPropertyKeyPath = expr.substring(0, indexOfSep)\n            producerPropertyKey = producerPropertyKeyPath\n            const regExpStr = expr.substr(indexOfSep + 1)\n            const indexOfSecSep = regExpStr.indexOf('/')\n\n            if (indexOfSecSep >= 0) {\n                producerPropertyKeyPathRegExp = new RegExp(regExpStr.substring(0, indexOfSecSep), regExpStr.substr(indexOfSep + 1))\n            } else {\n                producerPropertyKeyPathRegExp = new RegExp(regExpStr)\n            }\n        }\n\n        if (producerPropertyKey.indexOf('.') >= 0) {\n            deep = true\n            producerPropertyKey = producerPropertyKey.substring(0, producerPropertyKey.indexOf('.'))\n        }\n\n        const producerPropertyCallTypeDetail = this.ensureIntrumentation(producerPropertyKey)\n\n        const binder = new Binder(\n            this, this.owner, producerPropertyKey, producerPropertyKeyPath.split('.'), producerPropertyKeyPathRegExp,\n            producerPropertyCallTypeDetail, consumer, consumerPropertyKey,\n            !consumerPropertyKey ? 'none' : getPropertyCallTypeFromPrototypeFromInstance(consumer, consumerPropertyKey)[0],\n            deep, active === undefined ? true : active\n        )\n\n        let bindersLocal = this.outBinders.get(producerPropertyKey)\n\n        if (bindersLocal === undefined) {\n            bindersLocal = new Set()\n            this.outBinders.set(producerPropertyKey, bindersLocal)\n        }\n\n        bindersLocal.add(binder)\n\n        if (consumerPropertyKey !== undefined && typeof consumer !== 'function') {\n            consumer.instrumentation.bindIn(binder)\n        }\n\n        if (binder.deep) {\n            this.addDeepBy(binder)\n\n            switch (producerPropertyCallTypeDetail[0]) {\n                case 'setter': {\n                    const descriptor = producerPropertyCallTypeDetail[1]\n                    const value = descriptor.get.call(this.owner)\n\n                    if (value) {\n                        if (value.isProxy) {\n                            const ObjectProxyHandler = value.proxyHandler\n\n                            if (ObjectProxyHandler.observer !== this) {\n                                ObjectProxyHandler.addObserver(this, producerPropertyKey)\n                            }\n                        } else if (value instanceof Object) {\n                            descriptor.set.call(this.owner, ObjectProxyHandler.create(value, this, producerPropertyKey))\n                        } else {\n                            descriptor.set.call(this.owner, value)\n                        }\n                    } else {\n                        descriptor.set.call(this.owner, value)\n                    }\n                } break\n                case 'writable': {\n                    const descriptor = producerPropertyCallTypeDetail[1]\n                    const value = descriptor.value\n\n                    if (value) {\n                        if (value.isProxy) {\n                            const ObjectProxyHandler = value.proxyHandler\n\n                            if (ObjectProxyHandler.observer !== this) {\n                                ObjectProxyHandler.addObserver(this, producerPropertyKey)\n                            }\n                        } else if (value instanceof Object) {\n                            descriptor.set.call(this.owner, ObjectProxyHandler.create(value, this, producerPropertyKey))\n                        } else {\n                            descriptor.set.call(this.owner, value)\n                        }\n                    } else {\n                        descriptor.set.call(this.owner, value)\n                    }\n                } break\n            }\n        }\n\n        if (init) {\n            binder.dispatch(\n                this.owner[producerPropertyKey], undefined,\n                'init', [producerPropertyKey],\n                binder.producerPropertyPath.length === 1 ? '=' : '<'\n            )\n        }\n\n        return binder\n    }\n\n    bindIn(binder: Binder): Binder {\n        if (this.inBinders === null) {\n            this.inBinders = new Map()\n        }\n\n        let bindersLocal = this.inBinders.get(binder.consumerPropertyKey)\n\n        if (bindersLocal === undefined) {\n            bindersLocal = new Set()\n            this.inBinders.set(binder.consumerPropertyKey, bindersLocal)\n        }\n\n        bindersLocal.add(binder)\n        binder.consumerInstrumentation = this\n        return binder\n    }\n\n    unbindOut(binder: Binder) {\n        const bindersLocal = this.outBinders.get(binder.producerPropertyKey)\n        bindersLocal.delete(binder)\n\n        if (bindersLocal.size === 0) {\n            this.outBinders.delete(binder.producerPropertyKey)\n\n            if (this.outBinders.size === 0) {\n                this.outBinders = null\n            }\n        }\n\n        if (binder.deep) {\n            this.removeDeepBy(binder)\n        }\n    }\n\n    unbindIn(binder: Binder) {\n        const bindersLocal = this.inBinders.get(binder.consumerPropertyKey)\n        bindersLocal.delete(binder)\n\n        if (bindersLocal.size === 0) {\n            this.inBinders.delete(binder.consumerPropertyKey)\n\n            if (this.inBinders.size === 0) {\n                this.inBinders = null\n            }\n        }\n    }\n\n    notify(value: any, oldValue: any, operation: DispatchOperation, path: Array<any>, execute?: [(value) => any, any]): any {\n        const carrier: BinderDispatchCarrier = {\n            value: value\n        }\n\n        if (this.outBinders !== null) {\n            const propertyKey = path[0].toString()\n            let abortAction = false\n            const bindersByKey = this.outBinders.get(propertyKey)\n\n            if (bindersByKey !== undefined) {\n                const pathStr = path.join('.')\n                const pathToMatch = path.slice(1).join('.')\n\n                for (const binder of bindersByKey) {\n                    if (binder.active) {\n                        if (pathContains(binder.producerPropertyPath, path)) {\n                            if (\n                                binder.dispatch(\n                                    carrier, oldValue, operation, path,\n                                    path.length === binder.producerPropertyPath.length ? '=' : '<'\n                                ) === ABORT_ACTION || carrier.abort\n                            ) {\n                                abortAction = true\n                                break\n                            }\n                        } else if (\n                            path.length > binder.producerPropertyPath.length &&\n                            pathContains(path, binder.producerPropertyPath) &&\n                            binder.producerPropertyPathRegExp &&\n                            binder.producerPropertyPathRegExp.exec(path.slice(binder.producerPropertyPath.length).join('.'))\n                        ) {\n                            if (binder.dispatch(carrier, oldValue, operation, path, '>') === ABORT_ACTION || carrier.abort) {\n                                abortAction = true\n                                break\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (!abortAction && !!execute) {\n                return execute[0].call(execute[1], carrier.value)\n            } else {\n                return undefined\n            }\n        } else if (!!execute) {\n            return execute[0].call(execute[1], carrier.value)\n        }\n    }\n}\n"]}