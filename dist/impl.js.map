{"version":3,"sources":["../src/impl.ts"],"names":[],"mappings":"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","file":"impl.js","sourcesContent":["import { ObjectProxyHandler } from './proxy_handler';\nimport { BinderConsumerType, Binder, currentBinderDispatchDetail, bypassNextBinderDispatch, abortNextBinderDispatch } from './binder'\n\nimport {\n    BindInParamsType, BindOutParamsType, getHeadPrototype, getHeadPrototypeFromInstance,\n    getPropertyDescriptorPrototype, getPropertyDescriptorPrototypeFromInstance, Instrumentation, ABORT_ACTION\n} from './instrumentation'\n\ndeclare const global: any\n\nif (!global) {\n    if (self) {\n        self['global'] = self\n    } else {\n        window['global'] = window\n    }\n}\n\nglobal.ABORT_ACTION = ABORT_ACTION\nglobal.ObjectProxyHandler = ObjectProxyHandler\nglobal.abortNextBinderDispatch = abortNextBinderDispatch\nglobal.bypassNextBinderDispatch = bypassNextBinderDispatch\nglobal.currentBinderDispatchDetail = currentBinderDispatchDetail\nglobal.getHeadPrototype = getHeadPrototype\nglobal.getHeadPrototypeFromInstance = getHeadPrototypeFromInstance\nglobal.getPropertyDescriptorPrototype = getPropertyDescriptorPrototype\nglobal.getPropertyDescriptorPrototypeFromInstance = getPropertyDescriptorPrototypeFromInstance\n\nif (Object.getOwnPropertyDescriptor(Object.prototype, 'instrumentation') === undefined) {\n    Object.defineProperty(Object.prototype, 'instrumentation', {\n        enumerable: false,\n        configurable: false,\n        get: function () {\n            if (Object.getOwnPropertyDescriptor(this, '__instrumentation') === undefined) {\n                let __instrumentation = new Instrumentation(this)\n\n                Object.defineProperty(this, '__instrumentation', {\n                    enumerable: false,\n                    configurable: false,\n                    get: function () {\n                        return __instrumentation\n                    },\n                    set: function (value) {\n                        __instrumentation = value\n                    }\n                })\n            }\n\n            return this.__instrumentation\n        },\n        set: function (value) {\n            this.__instrumentation = value\n        }\n    })\n}\n\nObject.prototype['dispose'] = function () {\n    if (this.isProxy) {\n        this.proxyHandler.dispose()\n    }\n\n    if (this.__instrumentation !== undefined) {\n        this.__instrumentation.dispose()\n        this.__instrumentation = undefined\n    }\n}\n\nObject.prototype['bind'] = function (expression: string, consumer: BinderConsumerType, consumerPropertyKey?: any, active?: boolean): Binder {\n    return this.instrumentation.bindOut(expression, consumer, consumerPropertyKey, active)\n}\n\nObject.prototype['bindOut'] = function (params: BindOutParamsType): any {\n    params.forEach(element => {\n        if (element.length === 2) {\n            this.bind(element[0], element[1])\n        } if (element.length === 3) {\n            if (typeof element[1] === 'function') {\n                this.bind(element[0], element[1], undefined, element[2])\n            } else {\n                this.bind(element[0], element[1], element[2])\n            }\n        } else if (element.length === 4) {\n            this.bind(element[0], element[1], element[2], element[3])\n        }\n    })\n\n    return this\n}\n\nObject.prototype['bindIn'] = function (params: BindInParamsType): any {\n    params.forEach(element => {\n        if (element.length === 3) {\n            if (typeof element[2] === 'function') {\n                element[0].bind(element[1], element[2])\n            } else {\n                element[0].bind(element[1], this, element[2])\n            }\n        } else if (element.length === 4) {\n            if (typeof element[2] === 'function') {\n                element[0].bind(element[1], element[2], undefined, element[3])\n            } else {\n                element[0].bind(element[1], this, element[2], element[3])\n            }\n        }\n    })\n\n    params.forEach(element => {\n        if (typeof element[2] === 'function') {\n            element[0].bind(element[1], element[2])\n        } else {\n            element[0].bind(element[1], this, element[2])\n        }\n    })\n\n    return this\n}\n\nObject.prototype['toProxy'] = function (): any {\n    if (this.isProxy) {\n        return this\n    } else {\n        return ObjectProxyHandler.create(this)\n    }\n}"]}